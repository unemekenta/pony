(function(e){function t(t){for(var n,o,i=t[0],c=t[1],u=t[2],p=0,m=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&m.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(m.length)m.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},s={app:0},r=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"15b9":function(e,t,a){},"3a54":function(e,t,a){"use strict";a("b835")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("a026"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"nav"}},[a("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" | "),a("router-link",{attrs:{to:"/MyPage"}},[e._v("MyPage")])],1),a("router-view")],1)},r=[],o=(a("034f"),a("2877")),i={},c=Object(o["a"])(i,s,r,!1,null,null,null),u=c.exports,l=a("8c4f"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"top"},[a("div",{staticClass:"header"},[a("button",{staticClass:"header-logoutBtn",on:{click:e.signOut}},[e._v("ログアウト")])]),a("div",{staticClass:"main"},[a("div",{staticClass:"main-allMessage"},[a("h2",{staticClass:"main-allMessage-title"},[e._v("コメント一覧")]),e._l(this.allMessages,(function(t,n){return a("div",{key:n,staticClass:"main-allMessage-contents"},[a("div",{staticClass:"main-allMessage-contents-userIcon"},[a("img",{attrs:{src:t.CommentUserImage}}),a("p",{staticClass:"main-allMessage-contents-userIcon-name"},[e._v(e._s(t.CommentUser))])]),a("p",{staticClass:"main-allMessage-contents-txt"},[e._v(e._s(t.Content))]),a("p",{staticClass:"main-allMessage-contents-time"},[e._v(e._s(t.CreatedAt))])])}))],2)])])},m=[],g=a("b85c"),d=a("1da1"),f=(a("96cf"),a("bc3a")),h=a.n(f),v=a("260b"),b={name:"HelloWorld",data:function(){return{title:"アクティビティ",allMessages:[]}},created:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n,s,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h.a.get("http://localhost:8000/api/comments");case 2:a=t.sent,n=Object(g["a"])(a.data),t.prev=4,n.s();case 6:if((s=n.n()).done){t.next=15;break}return r=s.value,t.next=10,h.a.get("http://localhost:8000/api/comment_users/"+r.UserID);case 10:o=t.sent,r.CommentUser=o.data.Name,r.CommentUserImage=o.data.ImageURL;case 13:t.next=6;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](4),n.e(t.t0);case 20:return t.prev=20,n.f(),t.finish(20);case 23:e.allMessages=a.data,console.log(e.allMessages);case 25:case"end":return t.stop()}}),t,null,[[4,17,20,23]])})))()},methods:{signOut:function(){var e=this;v["a"].auth().signOut().then((function(){e.$router.push("/signin")}))}}},C=b,w=(a("3a54"),Object(o["a"])(C,p,m,!1,null,"7ad3b7ec",null)),_=w.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"signUpPage"},[a("h2",[e._v("Sign up")]),a("form",{staticClass:"signUpPage-form"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"signUpPage-form-name",attrs:{type:"text",placeholder:"Name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"signUpPage-form-email",attrs:{type:"text",placeholder:"Email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"signUpPage-form-password",attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),a("button",{staticClass:"signUpPage-form-button",on:{click:e.signUp}},[e._v("登録")]),a("p",[e._v("アカウントをすでにお持ちの方はこちら")]),a("router-link",{attrs:{to:"/signin"}},[e._v("ログインする")])],1)])},x=[],M=(a("2b3d"),a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),{name:"Signup",data:function(){return{email:"",password:""}},methods:{signUp:function(){var e=this;v["a"].auth().createUserWithEmailAndPassword(this.email,this.password).then().catch((function(e){alert(e.message)})),v["a"].auth().onAuthStateChanged((function(t){var a=new URLSearchParams;a.append("name",e.name),a.append("uid",t.uid),console.log(t.uid),h.a.post("http://localhost:8000/api/users",a).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),e.$router.push("/")}))}}}),P=M,O=(a("ba74"),Object(o["a"])(P,y,x,!1,null,"6ee57b26",null)),k=O.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"signInPage"},[a("h2",[e._v("Sign in")]),a("div",{staticClass:"signInPage-form"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"signInPage-form-email",attrs:{type:"text",placeholder:"Email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"signInPage-form-password",attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),a("button",{staticClass:"signInPage-form-button",on:{click:e.signIn}},[e._v("ログイン")]),a("p",[e._v("アカウントをまだお持ちでない方はこちら")]),a("router-link",{attrs:{to:"/signup"}},[e._v("アカウントを作成する")])],1)])},j=[],S={name:"Signin",data:function(){return{email:"",password:""}},methods:{signIn:function(){var e=this;v["a"].auth().signInWithEmailAndPassword(this.email,this.password).then((function(t){console.log(t),alert("ログインしました"),e.$router.push("/")}),(function(e){alert(e.message)}))}}},U=S,A=(a("d3e3"),Object(o["a"])(U,I,j,!1,null,"56bbcf92",null)),R=A.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"top"},[n("div",{staticClass:"header"},[n("button",{staticClass:"header-logoutBtn",on:{click:e.signOut}},[e._v("ログアウト")])]),n("div",{staticClass:"user"},[n("img",{staticClass:"user-icon",attrs:{src:e.userData.ImageURL}}),n("div",{staticClass:"user-name"},[e._v(e._s(e.userData.Name)+" さんのページ")])]),n("div",{staticClass:"main"},[n("div",{staticClass:"main-myMessage"},[n("h2",{staticClass:"main-myMessage-title"},[e._v("マイコメント")]),e._l(this.myMessages,(function(t,s){return n("div",{key:s,staticClass:"main-myMessage-contents"},[n("div",{staticClass:"main-myMessage-contents-top"},[n("img",{staticClass:"main-myMessage-contents-top-userIcon",attrs:{src:a("cf05")}}),n("button",{staticClass:"main-myMessage-contents-top-deleteBtn",on:{click:function(a){return e.deleteMessage(t.ID)}}},[e._v("削除")])]),n("p",{staticClass:"main-myMessage-contents-txt"},[e._v(e._s(t.Content))]),n("p",{staticClass:"main-myMessage-contents-time"},[e._v(e._s(t.CreatedAt))])])}))],2)]),n("div",{staticClass:"messageForm"},[n("form",{staticClass:"messageForm-form",attrs:{action:""}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.messageContents,expression:"messageContents"}],staticClass:"messageForm-form-input",attrs:{placeholder:"メッセージを入力"},domProps:{value:e.messageContents},on:{input:function(t){t.target.composing||(e.messageContents=t.target.value)}}}),n("button",{staticClass:"messageForm-form-btn",on:{click:function(t){return e.sendMessage()}}},[e._v("送信")])])])])},E=[],N={name:"MyPage",data:function(){return{db:null,myMessages:[],userData:"",messageContents:""}},created:function(){this.getData()},methods:{signOut:function(){var e=this;v["a"].auth().signOut().then((function(){e.$router.push("/signin")}))},getAllUser:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("http://localhost:8000/api/users");case 2:t=e.sent,console.log(t.data);case 4:case"end":return e.stop()}}),e)})))()},getData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:v["a"].auth().onAuthStateChanged(function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(a){var n,s,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}return n=a.uid,t.next=4,h.a.get("http://localhost:8000/api/users/"+n);case 4:return s=t.sent,e.userData=s.data,r=s.data["ID"],t.next=9,h.a.get("http://localhost:8000/api/comments/"+r);case 9:o=t.sent,e.myMessages=o.data,t.next=14;break;case 13:console.log("No user is signed in.");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},sendMessage:function(){var e=this;v["a"].auth().onAuthStateChanged(function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=8;break}return n=new URLSearchParams,n.append("content",e.messageContents),n.append("user_id",e.userData.ID),t.next=6,h.a.post("http://localhost:8000/api/comments",n).then((function(t){e.messageContents="",console.log(t)})).catch((function(e){console.log(e)}));case 6:t.next=9;break;case 8:console.log("送信に失敗しました。");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.getData()},deleteMessage:function(e){var t=this;v["a"].auth().onAuthStateChanged(function(){var a=Object(d["a"])(regeneratorRuntime.mark((function a(n){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!n){a.next=7;break}return s=e,console.log(e),a.next=5,h.a.delete("http://localhost:8000/api/comments/"+s).then((function(e){t.messageContents="",console.log(e)})).catch((function(e){console.log(e)}));case 5:a.next=8;break;case 7:console.log("削除に失敗しました。");case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),this.getData()}}},$=N,L=(a("e3eb"),Object(o["a"])($,D,E,!1,null,"22c7509b",null)),B=L.exports,F=a("2591");n["a"].use(l["a"]);var K=new l["a"]({routes:[{path:"/",name:"TopList",component:_,meta:{requiresAuth:!0}},{path:"/signup",name:"Signup",component:k},{path:"/signin",name:"Signin",component:R},{path:"/mypage",name:"MyPage",component:B,meta:{requiresAuth:!0}}]});K.beforeEach((function(e,t,a){var n=e.matched.some((function(e){return e.meta.requiresAuth}));n?F["a"].auth().onAuthStateChanged((function(e){e?a():a({path:"/signin"})})):a()}));var T=K;n["a"].config.productionTip=!1;var q={apiKey:"AIzaSyCKKrKOEgGtIn0X8H0nOpX_hht8xffV7Oo",authDomain:"pony-a8a03.firebaseapp.com",databaseURL:"pony-a8a03.firebaseio.com",projectId:"pony-a8a03",storageBucket:"pony-a8a03.appspot.com",messagingSenderId:"1044870454413"};v["a"].initializeApp(q),new n["a"]({el:"#app",router:T,components:{App:u},template:"<App/>"})},"85ec":function(e,t,a){},"87cc":function(e,t,a){},a8dc:function(e,t,a){},b835:function(e,t,a){},ba74:function(e,t,a){"use strict";a("87cc")},cf05:function(e,t,a){e.exports=a.p+"img/logo.82b9c7a5.png"},d3e3:function(e,t,a){"use strict";a("a8dc")},e3eb:function(e,t,a){"use strict";a("15b9")}});
//# sourceMappingURL=app.4d7ba451.js.map